#!/usr/bin/env bash
set -e

#                       ________    _________
#   _____ _____    ____ \_____  \  /   _____/
#  /     \\__  \ _/ ___\ /   |   \ \_____  \
# |  Y Y  \/ __ \\  \___/    |    \/        \
# |__|_|  (____  /\___  >_______  /_______  /
#       \/     \/     \/        \/        \/

# disable key hold popup
defaults write -g ApplePressAndHoldEnabled -bool false

# make repetitions super fast
defaults write -g InitialKeyRepeat -int 15
defaults write -g KeyRepeat -int 1

# dock goes on the left
defaults write com.apple.dock orientation -string left

# disable automatic capitalization and smart quotes as they're annoying when writing code
defaults write NSGlobalDomain NSAutomaticCapitalizationEnabled -bool false
defaults write NSGlobalDomain NSAutomaticQuoteSubstitutionEnabled -bool false

# enable subpixel font rendering on non-Apple LCDs
defaults write NSGlobalDomain AppleFontSmoothing -int 1

# use a dark menu bar and dock
defaults write NSGlobalDomain AppleInterfaceStyle -string "Dark"

# tap to click, please
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool true
defaults write com.apple.AppleMultitouchTrackpad Clicking -bool true

# don't open photos.app every time I plug in a device
defaults write com.apple.ImageCapture disableHotPlug -bool YES

# automatically hide and show the dock
defaults write com.apple.dock autohide -bool true

# show the dock quickly
defaults write com.apple.Dock autohide-delay -float 0

# expand save dialog by default
defaults write -g NSNavPanelExpandedStateForSaveMode -bool true
defaults write -g NSNavPanelExpandedStateForSaveMode2 -bool true

# always show scrollbar
defaults write -g AppleShowScrollBars -string "Always"

# don't write .DS_Store
defaults write com.apple.desktopservices DSDontWriteNetworkStores true

# ._____________                   ________
# |__\__    ___/__________  _____  \_____  \
# |  | |    |_/ __ \_  __ \/     \  /  ____/
# |  | |    |\  ___/|  | \/  Y Y  \/       \
# |__| |____| \___  >__|  |__|_|  /\_______ \
#                 \/            \/         \/

# use dark ui
defaults write com.googlecode.iterm2 TabStyle -int 1

# add jellybeans theme
open ~/Downloads/jellybeans.itermcolors

#    _____
#   /     \   ____   ____   _____
#  /  \ /  \ /  _ \ /  _ \ /     \
# /    Y    (  <_> |  <_> )  Y Y  \
# \____|__  /\____/ \____/|__|_|  /
#         \/                    \/

# run moom as faceless
defaults write com.manytricks.Moom "Application Mode" -int 2

# and we're done
apps=()
apps=("${apps[@]}" "Dock")

for app in "${apps[@]}"; do
  killall "${app}" &> /dev/null
done
